<!DOCTYPE html>
<html data-theme="lofi">

<head>
    <title>Test</title>
    <link rel="stylesheet" href="dist/widget.css">
    <script src="dist/widget.mjs" type="module"></script>

    <script>

        const RenderAppInstance = window.RenderAppInstance;
        const renderApp = RenderAppInstance('teste');
        const text1 = "#title\n\n Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec euismod, nisl eget aliquam lacinia, nunc nunc aliquet nunc, vitae aliquam nisl nunc vitae nisl. Donec euismod, nisl eget aliquam lacinia, nunc nunc aliquet nunc, vitae aliquam nisl nunc vitae nisl.";
        const text2 = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec euismod. ![imagem-teste](https://www.pontotel.com.br/wp-content/uploads/2022/05/imagem-corporativa.webp)"

        const messages = [
            { "author": "chatbot", "text": text1 },
            { "author": "user", "text": text2 },
            { "author": "chatbot", "text": text2 },
            { "author": "user", "text": text2 },
            { "author": "chatbot", "text": text1 },
            { "author": "user", "text": text1 },
            { "author": "chatbot", "text": text2 },
            { "author": "user", "text": text2 },
            { "author": "chatbot", "text": text1 },
            { "author": "user", "text": text2 },
            { "author": "chatbot", "text": text1 },
        ];

        const bots = [
            {
                name: "Bot 1",
                description: "Descrição do bot 1",
                id: 1,
                introMessage: "Olá, eu sou o bot 1",
                suggestions: ['sugestão 1', 'sugestão 2', 'sugestão 3']
            },
            {
                name: "Bot 2",
                description: "Descrição do bot 2",
                id: 2
            }
        ];


        const availableConfig = [
            {
                id: 'new_conversation',
                name: 'Nova Conversa',
            },
            {
                id: 'conversation_details',
                name: 'Dados da Conversa',
            },
            {
                id: 'delete_conversation',
                name: 'Apagar Conversa',
            },
        ];



        const initialProps = {
            onSendMessage: async ({ message, conversation }, stream) => {
                const response = '## Title. \n - lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. \n - lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua';
                // simulate stream response
                let i = 0;
                const delta = 1;
                // stream response
                const interval = setInterval(() => {
                    let part = response.slice(i, i + delta)
                    i++
                    stream(part)
                    if (i >= response.length) {
                        clearInterval(interval)
                    }
                }, 20);

                // return initial response
                return ''; response
            },
            onCreateConversation: () => { },
            onDeleteConversation: () => { },
            placeholder: "Digite sua mensagem aqui...",
            regenerateLimitText: "Parece que não fui capaz de responder sua última mensagem de forma satisfatória. Por favor, tente reescrevê-la de forma diferente ou adicionar mais detalhes.",
            botTypingCaption: "Digitando...",
            availableConfig,
            allowConversations: true,
            bots: bots,
            conversations: [
                {
                    title: "Conversa 1",
                    description: "Descrição da conversa 1",
                    id: 1,
                    messages: messages,
                    bot: bots[0],
                    updatedAt: new Date("2023-06-20")
                },
                {
                    title: "Conversa 2",
                    description: "Descrição longa da conversa 2, adicionando mais contexto e informações",
                    id: 2,
                    messages: messages,
                    bot: bots[1],
                    updatedAt: new Date("2023-06-20")
                },
                {
                    title: "Conversa 3",
                    description: "Descrição da conversa 3",
                    id: 3,
                    messages: messages.slice(0, 2),
                    bot: bots[0],
                    updatedAt: new Date()
                },
                {
                    title: "Conversa 4",
                    description: "Descrição da conversa 4",
                    id: 4,
                    messages: messages.slice(0, 0),
                    bot: bots[0],
                    updatedAt: new Date()
                },
                {
                    title: "Conversa 5",
                    description: "Descrição da conversa 5",
                    id: 5,
                    messages: messages,
                    bot: bots[1],
                    updatedAt: new Date("2023-06-13")
                },
                {
                    title: "Conversa 6",
                    description: "Descrição da conversa 6",
                    id: 6,
                    messages: messages,
                    bot: bots[0],
                    updatedAt: new Date("2023-06-13")
                }
            ]
        }
        renderApp(initialProps)
    </script>
</head>

<body>
    <div id="teste"></div>
</body>

</html>